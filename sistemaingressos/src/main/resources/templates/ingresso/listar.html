<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout/layoutpadrao}" lang="pt-br">

<head>
  <title>ShowGo | Lista de Ingressos</title>
</head>

<body>

  <main layout:fragment="main" class="flex-1 ml-64 p-4 md:p-20 mt-10">

    <div class="border border-yellow-500 p-6 md:p-10 shadow-lg rounded-lg bg-white">

      <!-- Cabeçalho -->
      <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8">
        <h1 class="text-2xl md:text-3xl font-bold">Ingressos</h1>
        <a href="/ingressos/novo"
          class="bg-yellow-500 text-black font-semibold px-6 py-3 rounded-lg hover:bg-yellow-400 transition text-lg">
          Adicionar Ingresso
        </a>
      </div>

      <!-- Tabela -->
      <div class="overflow-x-auto w-full">
        <table class="min-w-full text-left border border-yellow-500 rounded overflow-hidden shadow">
          <thead class="bg-yellow-500 text-black text-sm uppercase">
            <tr>
              <th class="px-4 py-3">ID</th>
              <th class="px-4 py-3">Evento</th>
              <th class="px-4 py-3">Data</th>
              <th class="px-4 py-3">Local</th>
              <th class="px-4 py-3">Tipo</th>
              <th class="px-4 py-3">Preço</th>
              <th class="px-4 py-3">Status</th>
              <th class="px-4 py-3">Ações</th>
            </tr>
          </thead>
          <tbody th:if="${ingressos.size() > 0}">
            <tr th:each="ingresso : ${ingressos}" class="border-t border-yellow-500 hover:bg-black/10 transition">
              <td class="px-4 py-3" th:text="${ingresso.id}">1</td>
              <td class="px-4 py-3" th:text="${ingresso.evento.nome}">Show</td>
              <td class="px-4 py-3" th:text="${#temporals.format(ingresso.data, 'dd/MM/yyyy')}">01/07/2025</td>
              <td class="px-4 py-3" th:text="${ingresso.local}">Local</td>
              <td class="px-4 py-3" th:text="${ingresso.tipo}">VIP</td>
              <td class="px-4 py-3" th:text="${#numbers.formatDecimal(ingresso.preco, 2, 'COMMA', 2, 'POINT')}">100,00
              </td>
              <td class="px-4 py-3" th:text="${ingresso.status}">DISPONIVEL</td>
              <td class="px-4 py-3 space-x-3 whitespace-nowrap">
                <a th:href="@{'/ingressos/editar/' + ${ingresso.id}}" class="text-yellow-400 hover:underline">Editar</a>
                <a th:href="@{'/ingressos/excluir/' + ${ingresso.id}}" class="text-red-500 hover:underline"
                  onclick="return confirm('Tem certeza que deseja excluir este ingresso?');">Excluir</a>

                <!-- Botão Comprar -->
               <button type="button"
                  th:onclick="'abrirPopupCompra(' + ${ingresso.id} + ')'"
                  class="bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 transition text-sm ml-2">
                  Comprar
                </button>
              </td>
            </tr>
          </tbody>
          <tbody th:if="${ingressos.size() == 0}">
            <tr>
              <td colspan="8" class="px-4 py-6 text-center text-gray-300">Nenhum ingresso cadastrado.</td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>

  </main>
<script src="/src/main/resources/static/js/script.js"></script>

</body>
</html>